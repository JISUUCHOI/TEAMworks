<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="mailMapper">

  	<resultMap type="MailInfo" id="mailInfoResultSet">
  		<id column="em_info_no" property="emailInfoNo"/>
  		<result column="em_imap" property="emIimap"/>
  		<result column="em_imap_port" property="emIimapport"/>
  		<result column="em_smtp" property="emIsmtp"/>
  		<result column="em_smtp_port" property="emIsmtpport"/>
  		<result column="email_user" property="emIuserId"/>
  		<result column="email_pwd" property="emIuserPwd"/>
  		<result column="entry_date" property="entryDate"/>
  		<result column="emp_id" property="empId"/>
  		<result column="emp_name" property="empName"/>
  		<result column="status" property="status"/>
  	</resultMap>
  	
  	<resultMap type="MailDTO" id="mailDtoResultSet">
  		<id column="email_no" property="emailNo"/>
  		<result column="email_title" property="mailTitle"/>
  		<result column="email_content" property="mailContent"/>
  		<result column="create_date" property="createDate"/>
  		<result column="email_status" property="emailStatus"/>
  		<result column="em_info_no" property="emInfoNo"/>
  		<result column="emp_id" property="sender"/>
  		<result column="emp_id2" property="recipients"/>
  		<result column="delete_status" property="deleteStatus"/>
  		<result column="read_status" property="readStatus"/>
  		<result column="emp_name" property="senderName"/>
  		<result column="emp_email" property="senderEmail"/>
  		<result column="ref_emp" property="refRecipients"/>
  		<result column="eatype" property="refType"/>
  		<result column="files" property="files"/>
  	</resultMap>
  	
 	<select id="selectInboxListCount" parameterType="string" resultType="_int">
 		SELECT COUNT(*)
		FROM V_EMAIL_LIST
		WHERE EMP_ID2=#{empId} OR REF_EMP= #{empId} AND EMAIL_STATUS='Y'
 	</select>
 	
 	<select id="selectInboxList" parameterType="string" resultMap="mailDtoResultSet">
 		SELECT *
		FROM V_EMAIL_LIST
		WHERE EMP_ID2=#{empId} OR REF_EMP= #{empId} AND EMAIL_STATUS='Y'
		ORDER BY EMAIL_NO DESC
 	</select>
 	
 	
</mapper>
